var e=class{constructor(e=0,t=`Network Error`){this.status=e,this.text=t}};const t={origin:`https://api.emailjs.com`,blockHeadless:!1,storageProvider:(()=>{if(!(typeof localStorage>`u`))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},n=e=>e?typeof e==`string`?{publicKey:e}:e.toString()===`[object Object]`?e:{}:{},r=(e,r=`https://api.emailjs.com`)=>{if(!e)return;let i=n(e);t.publicKey=i.publicKey,t.blockHeadless=i.blockHeadless,t.storageProvider=i.storageProvider,t.blockList=i.blockList,t.limitRate=i.limitRate,t.origin=i.origin||r},i=async(n,r,i={})=>{let a=await fetch(t.origin+n,{method:`POST`,headers:i,body:r}),o=await a.text(),s=new e(a.status,o);if(a.ok)return s;throw s},a=(e,t,n)=>{if(!e||typeof e!=`string`)throw`The public key is required. Visit https://dashboard.emailjs.com/admin/account`;if(!t||typeof t!=`string`)throw`The service ID is required. Visit https://dashboard.emailjs.com/admin`;if(!n||typeof n!=`string`)throw`The template ID is required. Visit https://dashboard.emailjs.com/admin/templates`},o=e=>{if(e&&e.toString()!==`[object Object]`)throw`The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/`},s=e=>e.webdriver||!e.languages||e.languages.length===0,c=()=>new e(451,`Unavailable For Headless Browser`),l=(e,t)=>{if(!Array.isArray(e))throw`The BlockList list has to be an array`;if(typeof t!=`string`)throw`The BlockList watchVariable has to be a string`};var u=e=>!e.list?.length||!e.watchVariable,d=(e,t)=>e instanceof FormData?e.get(t):e[t];const f=(e,t)=>{if(u(e))return!1;l(e.list,e.watchVariable);let n=d(t,e.watchVariable);return typeof n==`string`?e.list.includes(n):!1},p=()=>new e(403,`Forbidden`),m=(e,t)=>{if(typeof e!=`number`||e<0)throw`The LimitRate throttle has to be a positive number`;if(t&&typeof t!=`string`)throw`The LimitRate ID has to be a non-empty string`};var h=async(e,t,n)=>{let r=Number(await n.get(e)||0);return t-Date.now()+r};const g=async(e,t,n)=>{if(!t.throttle||!n)return!1;m(t.throttle,t.id);let r=t.id||e;return await h(r,t.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},_=()=>new e(429,`Too Many Requests`),v=async(e,r,l,u)=>{let d=n(u),m=d.publicKey||t.publicKey,h=d.blockHeadless||t.blockHeadless,v=d.storageProvider||t.storageProvider,y={...t.blockList,...d.blockList},b={...t.limitRate,...d.limitRate};if(h&&s(navigator))return Promise.reject(c());if(a(m,e,r),o(l),l&&f(y,l))return Promise.reject(p());if(await g(location.pathname,b,v))return Promise.reject(_());let x={lib_version:`4.4.1`,user_id:m,service_id:e,template_id:r,template_params:l};return i(`/api/v1.0/email/send`,JSON.stringify(x),{"Content-type":`application/json`})},y=e=>{if(!e||e.nodeName!==`FORM`)throw`The 3rd parameter is expected to be the HTML form element or the style selector of the form`};var b=e=>typeof e==`string`?document.querySelector(e):e;const x=async(e,r,o,l)=>{let u=n(l),d=u.publicKey||t.publicKey,m=u.blockHeadless||t.blockHeadless,h=t.storageProvider||u.storageProvider,v={...t.blockList,...u.blockList},x={...t.limitRate,...u.limitRate};if(m&&s(navigator))return Promise.reject(c());let S=b(o);a(d,e,r),y(S);let C=new FormData(S);return f(v,C)?Promise.reject(p()):await g(location.pathname,x,h)?Promise.reject(_()):(C.append(`lib_version`,`4.4.1`),C.append(`service_id`,e),C.append(`template_id`,r),C.append(`user_id`,d),i(`/api/v1.0/email/send-form`,C))};var S={init:r,send:v,sendForm:x,EmailJSResponseStatus:e};export{e as EmailJSResponseStatus,S as default,r as init,v as send,x as sendForm};